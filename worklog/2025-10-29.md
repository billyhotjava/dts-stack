2025-10-29
----------------
- Admin 审计模块梳理：所有业务入口统一通过 `AuditV2Service`→`AuditRecorder` 显式写入 `audit_entry` 系列表，`AuditLogResource` 负责查询与姓名映射，权限范围由 `resolveVisibilityScope()` 控制，保留的自动记录仅限登录监听 `AuthAuditListener`（安全审计需求）。
- Platform 审计链路：控制层/服务层显式调用 `AuditService.recordAs`，最终由 `AuditTrailService` 转发到 admin `/api/audit-events`，已清理定时任务或后台流程的自动落库，仅登录场景保留日志。
- 埋点策略：仅针对人工操作埋点（按钮、查询、审批、导出等），摘要须带对象名称，详情包含目标表与主键；查询接口（质量规则、运行记录等）在返回前补写 `READ` 审计。
- 自动日志治理：两端明确禁止新增后台脚本或定时任务写审计，`AuditTrailService` 仅做 GET 去重；建议持续对 `audit_entry` 抽检，防止出现 `system/anonymous` 记录。
- 后续动作：确认生产环境 `AuditTrailService` 指向有效 admin URL 并启用，补充集成测试覆盖重点埋点（审批、菜单、质量规则、SQL），确保登录用户中文姓名解析链路持续可用。
