Fix: Role menu bindings not shown in approval list

Timestamp: 2025-10-04 16:21:40

Context
- Users reported: modifying role custom attributes (e.g., bound menu list) does not appear in approval tickets.
- Frontend UpdateRoleDialog submits menu binding updates as individual change requests of resourceType=PORTAL_MENU.
- Approval Center filters displayed requests to user/role only and excluded PORTAL_MENU; additionally, those menu CRs lacked diffJson, so even if visible they wouldn’t present a before/after summary.

Root cause
1) Approval filter excluded menu visibility changes:
   - File: source/dts-admin-webapp/src/admin/views/approval-center.tsx
   - ROLE_RESOURCE_TYPES only had ROLE, CUSTOM_ROLE, ROLE_ASSIGNMENT. PORTAL_MENU CRs were filtered out.
2) Missing diff for menu updates:
   - File: source/dts-admin-webapp/src/admin/views/role-management.tsx
   - submitMenuChangeRequests created CR with only payloadJson({allowedRoles}), no diffJson. Approval details couldn’t show before/after.

Changes
1) Include PORTAL_MENU in role approvals:
   - approval-center.tsx: ROLE_RESOURCE_TYPES now includes "PORTAL_MENU" so binding changes appear under 角色管理.

2) Provide clear before/after diff for menu bindings:
   - role-management.tsx: submitMenuChangeRequests now sends diffJson with { before.allowedRoles, after.allowedRoles } alongside payloadJson.

Validation steps
- In 管理端 -> 角色管理, edit a role’s 绑定菜单 and submit.
- Open 审批中心:
  - Ensure the new entries appear under 角色管理 (type=PORTAL_MENU included).
  - Click entry: Details should show allowedRoles change as before → after.
- Approve, then verify portal menu visibility reflects new bindings (via /admin/portal-menus and UI navigation).

Notes
- This does not change apply logic (server already applies PORTAL_MENU updates in AdminApiResource.applyPortalMenuChange).
- If a single composed approval for role + menus is desired, that requires a new backend composite CR type; out of scope here.
