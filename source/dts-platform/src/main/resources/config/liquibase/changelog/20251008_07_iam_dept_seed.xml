<?xml version="1.0" encoding="utf-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-latest.xsd">

    <changeSet id="20251008-07-iam-dept-seed" author="platform">
        <comment>Seed minimal departments for UI defaults and testing (idempotent)</comment>
        <sql>
            INSERT INTO iam_dept (id, code, name_zh, name_en, parent_code, path, created_date)
            VALUES ('11111111-1111-4111-8111-111111111111', 'S10', 'S10 研究所', 'S10 Institute', NULL, '/S10', ${now})
            ON CONFLICT (code) DO NOTHING;
        </sql>
        <sql>
            INSERT INTO iam_dept (id, code, name_zh, name_en, parent_code, path, created_date)
            VALUES ('22222222-2222-4222-8222-222222222222', 'D001', '数据科学部', 'Data Science', 'S10', '/S10/D001', ${now})
            ON CONFLICT (code) DO NOTHING;
        </sql>
        <sql>
            INSERT INTO iam_dept (id, code, name_zh, name_en, parent_code, path, created_date)
            VALUES ('33333333-3333-4333-8333-333333333333', 'D002', '工程实施部', 'Engineering', 'S10', '/S10/D002', ${now})
            ON CONFLICT (code) DO NOTHING;
        </sql>
    </changeSet>

</databaseChangeLog>
