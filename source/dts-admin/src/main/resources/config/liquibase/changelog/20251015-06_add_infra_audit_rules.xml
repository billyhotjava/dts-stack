<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.22.xsd">

    <changeSet id="20251015-06-add-infra-audit-rules" author="gemini-cli">
        <comment>Add audit operation mapping rules for Infra module.</comment>

        <!-- Infrastructure Rules -->
        <insert tableName="audit_operation_mapping"><column name="url_pattern" value="/api/infra/data-sources"/><column name="http_method" value="GET"/><column name="module_name" value="基础设施"/><column name="operation_type" value="READ"/><column name="description_template" value="查询数据源列表"/><column name="source_table_template" value="数据源"/><column name="order_value" valueNumeric="30"/><column name="enabled" valueBoolean="true"/></insert>
        <insert tableName="audit_operation_mapping"><column name="url_pattern" value="/api/infra/data-sources"/><column name="http_method" value="POST"/><column name="module_name" value="基础设施"/><column name="operation_type" value="CREATE"/><column name="description_template" value="新建数据源"/><column name="source_table_template" value="数据源"/><column name="order_value" valueNumeric="30"/><column name="enabled" valueBoolean="true"/></insert>
        <insert tableName="audit_operation_mapping"><column name="url_pattern" value="/api/infra/data-sources/{id}"/><column name="http_method" value="PUT"/><column name="module_name" value="基础设施"/><column name="operation_type" value="UPDATE"/><column name="description_template" value="修改数据源: {id}"/><column name="source_table_template" value="数据源"/><column name="param_extractors" value="{&quot;id&quot;:&quot;path.id&quot;}"/><column name="order_value" valueNumeric="29"/><column name="enabled" valueBoolean="true"/></insert>
        <insert tableName="audit_operation_mapping"><column name="url_pattern" value="/api/infra/data-sources/{id}"/><column name="http_method" value="DELETE"/><column name="module_name" value="基础设施"/><column name="operation_type" value="DELETE"/><column name="description_template" value="删除数据源: {id}"/><column name="source_table_template" value="数据源"/><column name="param_extractors" value="{&quot;id&quot;:&quot;path.id&quot;}"/><column name="order_value" valueNumeric="29"/><column name="enabled" valueBoolean="true"/></insert>
        <insert tableName="audit_operation_mapping"><column name="url_pattern" value="/api/infra/data-sources/test-logs"/><column name="http_method" value="GET"/><column name="module_name" value="基础设施"/><column name="operation_type" value="READ"/><column name="description_template" value="查询数据源连接测试日志"/><column name="source_table_template" value="数据源"/><column name="order_value" valueNumeric="30"/><column name="enabled" valueBoolean="true"/></insert>
        <insert tableName="audit_operation_mapping"><column name="url_pattern" value="/api/infra/data-sources/test-connection"/><column name="http_method" value="POST"/><column name="module_name" value="基础设施"/><column name="operation_type" value="EXECUTE"/><column name="description_template" value="测试数据源连接"/><column name="source_table_template" value="数据源"/><column name="order_value" valueNumeric="30"/><column name="enabled" valueBoolean="true"/></insert>
        <insert tableName="audit_operation_mapping"><column name="url_pattern" value="/api/infra/data-sources/inceptor/publish"/><column name="http_method" value="POST"/><column name="module_name" value="基础设施"/><column name="operation_type" value="PUBLISH"/><column name="description_template" value="发布 Inceptor 数据源"/><column name="source_table_template" value="数据源"/><column name="order_value" valueNumeric="30"/><column name="enabled" valueBoolean="true"/></insert>
        <insert tableName="audit_operation_mapping"><column name="url_pattern" value="/api/infra/data-sources/inceptor/refresh"/><column name="http_method" value="POST"/><column name="module_name" value="基础设施"/><column name="operation_type" value="REFRESH"/><column name="description_template" value="刷新 Inceptor 注册表"/><column name="source_table_template" value="数据源"/><column name="order_value" valueNumeric="30"/><column name="enabled" valueBoolean="true"/></insert>
        <insert tableName="audit_operation_mapping"><column name="url_pattern" value="/api/infra/features"/><column name="http_method" value="GET"/><column name="module_name" value="基础设施"/><column name="operation_type" value="READ"/><column name="description_template" value="查询基础设施特性"/><column name="source_table_template" value="基础设施"/><column name="order_value" valueNumeric="30"/><column name="enabled" valueBoolean="true"/></insert>

    </changeSet>
</databaseChangeLog>
