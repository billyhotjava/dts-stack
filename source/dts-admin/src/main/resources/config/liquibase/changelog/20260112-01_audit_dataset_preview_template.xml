<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.22.xsd">

    <changeSet id="20260112-01-audit-dataset-preview-template" author="codex">
        <comment>Surface dataset name in preview audit description</comment>
        <update tableName="audit_operation_mapping">
            <column name="description_template" value="预览数据资产：{datasetName|未知}（ID：{datasetId|未知}）"/>
            <column name="param_extractors" value="{&quot;datasetId&quot;:&quot;path.id&quot;,&quot;datasetName&quot;:&quot;details.datasetName&quot;}"/>
            <where>url_pattern = '/api/datasets/{id}/preview' AND http_method = 'GET'</where>
        </update>
    </changeSet>

</databaseChangeLog>
